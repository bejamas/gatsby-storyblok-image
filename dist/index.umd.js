!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.gatsbyStoryblokImage={})}(this,function(t){var e=/^(https?:)?\/\/a.storyblok.com\/f\/*[0-9]+\/*[0-9]*x*[0-9]*\/[A-Za-z0-9]+\/[\S]+\.[a-zA-Z]+/;function a(t){var a=null,i=null;if("string"==typeof t&&(a=t),"object"==typeof t&&(a=t.image,i=t.base64?t.base64:null),!(a=e.test(a)?a:null))return!1;var n=a.replace(/^(https?:)?\/\/a.storyblok.com\//,""),r=n.split("/"),o=r[4],s=r[2].split("x").map(function(t){return parseInt(t,10)}),u=s[0],h=s[1];return{originalPath:n,extension:o.split(".")[1],metadata:{dimensions:{width:u,height:h,aspectRatio:u/h},lqip:i}}}var i="https://a.storyblok.com",n=[1,1.5,2,3],r=[.25,.5,1,1.5,2,3],o={quality:100,smartCrop:!0,format:null,fill:null,toFormat:null,base64:null,useBase64:!0},s=Object.assign({},o,{maxWidth:800,maxHeight:null}),u=Object.assign({},o,{width:400,height:null});function h(t){var e=t.includes("filters:format(webp)"),a=/[a-f0-9]+-\d+x\d+\.webp/.test(t);return e||a}function l(t,e){var a=e.width,n=e.height,r=e.smartCrop,o=e.quality,s=e.format,u=e.fill,h=t.split("."),l=i;l+="/"+t+"/m",a&&n&&(l+="/"+a+"x"+n),r&&(l+="/smart");var c=[o&&"quality("+o+")",s&&s!==h[1]&&"format("+s+")",u&&"fill("+u+")"];return(c=c.filter(function(t){return!0===Boolean(t)})).length>0&&(l+=function(t){return t.reduce(function(t,e,a){return t+":"+e},"/filters")}(c)),l}function c(t,e){var a=e.height;return l(t,{width:(e.width/3).toFixed(0),height:(a/3).toFixed(0),quality:10})}t.getFixedGatsbyImage=function(t,e){void 0===e&&(e={});var i=a(t);if(!i)return null;var r=Object.assign({},u,e),o=r.width,s=r.height,f=i.metadata.dimensions,d=i.originalPath,p=f.aspectRatio;r.height&&(p=o/r.height);var g=null;r.toFormat?g=r.toFormat:h(d)&&(g="jpg");var m=n.map(function(t){return Math.round(o*t)}).filter(function(t){return t<f.width}).reduce(function(t,e,a){var i=n[a]+"x",o=Math.round(e/p),s=Object.assign({},r,{width:e,height:o}),u=l(d,Object.assign({},s,{format:"webp"})),h=l(d,Object.assign({},s,g&&{format:g}));return t.webp.push(u+" "+i),t.base.push(h+" "+i),t},{webp:[],base:[]}),b=Math.round(s||o/p),w=Object.assign({},r,{width:o,height:b}),v=l(d,Object.assign({},w,g&&{format:g}));return l(d,Object.assign({},w,{format:"webp"})),{base64:c(d,{width:o,height:s,aspectRatio:p}),aspectRatio:p,width:Math.round(o),height:b,src:v,srcSet:m.base.join(",\n")||null}},t.getFluidGatsbyImage=function(t,e){void 0===e&&(e={});var i=a(t);if(!i)return null;var n=Object.assign({},s,e),o=n.maxWidth,u=i.metadata.dimensions,f=i.originalPath,d=u.aspectRatio;n.maxHeight&&(d=o/n.maxHeight);var p=n.maxHeight||Math.round(o/u.aspectRatio),g=null;n.toFormat?g=n.toFormat:h(f)&&(g="jpg");var m=n.sizes||"(max-width: "+o+"px) 100vw, "+o+"px",b=r.map(function(t){return Math.round(o*t)}).filter(function(t){return t<u.width}).concat(u.width).filter(function(t){return t<u.width}).reduce(function(t,e){var a={width:e,height:Math.round(e/d)},i=l(f,Object.assign({},n,a,{format:"webp"})),r=l(f,Object.assign({},n,a,{format:g}));return t.webp.push(i+" "+e+"w"),t.base.push(r+" "+e+"w"),t},{webp:[],base:[]}),w={width:o,height:p},v=l(f,Object.assign({},n,w,{format:g}));return l(f,Object.assign({},n,w,{format:"webp"})),{base64:c(f,{width:o,height:p,aspectRatio:d}),aspectRatio:d,src:v,srcSet:b.base.join(",\n")||null,sizes:m}}});
//# sourceMappingURL=index.umd.js.map
