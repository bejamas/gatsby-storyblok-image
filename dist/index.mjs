var t=/^(https?:)?\/\/a.storyblok.com\/f\/*[0-9]+\/*[0-9]*x*[0-9]*\/[A-Za-z0-9]+\/[\S]+\.[a-zA-Z]+/;function e(e){var a=null,i=null;if("string"==typeof e&&(a=e),"object"==typeof e&&(a=e.image,i=e.base64?e.base64:null),!(a=t.test(a)?a:null))return!1;var n=a.replace(/^(https?:)?\/\/a.storyblok.com\//,""),r=n.split("/"),s=r[4],o=r[2].split("x").map(function(t){return parseInt(t,10)}),u=o[0],h=o[1];return{originalPath:n,extension:s.split(".")[1],metadata:{dimensions:{width:u,height:h,aspectRatio:u/h},lqip:i}}}var a="https://a.storyblok.com",i=[1,1.5,2,3],n=[.25,.5,1,1.5,2,3],r={quality:100,smartCrop:!0,format:null,fill:null,toFormat:null,base64:null,useBase64:!0},s=Object.assign({},r,{maxWidth:800,maxHeight:null}),o=Object.assign({},r,{width:400,height:null});function u(t){var e=t.includes("filters:format(webp)"),a=/[a-f0-9]+-\d+x\d+\.webp/.test(t);return e||a}function h(t,e){var i=e.width,n=e.height,r=e.smartCrop,s=e.quality,o=e.format,u=e.fill,h=t.split("."),l=a;l+="/"+t+"/m",i&&n&&(l+="/"+i+"x"+n),r&&(l+="/smart");var c=[s&&"quality("+s+")",o&&o!==h[1]&&"format("+o+")",u&&"fill("+u+")"];return(c=c.filter(function(t){return!0===Boolean(t)})).length>0&&(l+=function(t){return t.reduce(function(t,e,a){return t+":"+e},"/filters")}(c)),l}function l(t,e){var a=e.height;return h(t,{width:(e.width/3).toFixed(0),height:(a/3).toFixed(0),quality:10})}function c(t,a){void 0===a&&(a={});var n=e(t);if(!n)return null;var r=Object.assign({},o,a),s=r.width,c=r.height,p=n.metadata.dimensions,b=n.originalPath,f=p.aspectRatio;r.height&&(f=s/r.height);var d=null;r.toFormat?d=r.toFormat:u(b)&&(d="jpg");var g=i.map(function(t){return Math.round(s*t)}).filter(function(t){return t<p.width}).reduce(function(t,e,a){var n=i[a]+"x",s=Math.round(e/f),o=Object.assign({},r,{width:e,height:s}),u=h(b,Object.assign({},o,{format:"webp"})),l=h(b,Object.assign({},o,d&&{format:d}));return t.webp.push(u+" "+n),t.base.push(l+" "+n),t},{webp:[],base:[]}),m=Math.round(c||s/f),w=Object.assign({},r,{width:s,height:m}),j=h(b,Object.assign({},w,d&&{format:d})),v=h(b,Object.assign({},w,{format:"webp"}));return{base64:l(b,{width:s,height:c,aspectRatio:f}),aspectRatio:f,width:Math.round(s),height:m,src:j,srcWebp:v,srcSet:g.base.join(",\n")||null,srcSetWebp:g.webp.join(",\n")||null}}function p(t,a){void 0===a&&(a={});var i=e(t);if(!i)return null;var r=Object.assign({},s,a),o=r.maxWidth,c=i.metadata.dimensions,p=i.originalPath,b=c.aspectRatio;r.maxHeight&&(b=o/r.maxHeight);var f=r.maxHeight||Math.round(o/c.aspectRatio),d=null;r.toFormat?d=r.toFormat:u(p)&&(d="jpg");var g=r.sizes||"(max-width: "+o+"px) 100vw, "+o+"px",m=n.map(function(t){return Math.round(o*t)}).filter(function(t){return t<c.width}).concat(c.width).filter(function(t){return t<c.width}).reduce(function(t,e){var a={width:e,height:Math.round(e/b)},i=h(p,Object.assign({},r,a,{format:"webp"})),n=h(p,Object.assign({},r,a,{format:d}));return t.webp.push(i+" "+e+"w"),t.base.push(n+" "+e+"w"),t},{webp:[],base:[]}),w={width:o,height:f},j=h(p,Object.assign({},r,w,{format:d})),v=h(p,Object.assign({},r,w,{format:"webp"}));return{base64:l(p,{width:o,height:f,aspectRatio:b}),aspectRatio:b,src:j,srcWebp:v,srcSet:m.base.join(",\n")||null,srcSetWebp:m.webp.join(",\n")||null,sizes:g}}export{c as getFixedGatsbyImage,p as getFluidGatsbyImage};
//# sourceMappingURL=index.mjs.map
